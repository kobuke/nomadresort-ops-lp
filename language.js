const translations = {
    en: {
        problem: "Problem",
        features: "Features",
        price: "Price",
        contact_button: "Contact Us",
        hero_badge: "90% reduction in management costs",
        hero_title: "Automate tedious tasks and<br>create 'time' for operations.",
        hero_subtitle: "The management of digital nomad events should be more creative.<br>Automate everything from collection to contact by linking Discord and Stripe.<br>This is a solution that maximizes the enthusiasm of the community.",
        hero_cta1: "Get a consultation",
        hero_cta2: "See a demo",
        problem_title: "Are you overwhelmed with 'work'<br>when the number of participants exceeds a certain level?",
        problem_subtitle: "As the scale of the event grows, more time is taken up by 'operational tasks' than by 'experience design,' which should be the main focus.",
        problem_card1_title: "Spreadsheet Hell",
        problem_card1_text: "Participant lists, payment confirmations, allergy information... A mistake-prone operation that involves going back and forth between multiple sheets and manually copying and pasting.",
        problem_card2_title: "Endless Reminders",
        problem_card2_text: "'The event is tomorrow.' 'Here is the location.' The stress of being chased by individual contacts via DM and mentions, which eats into preparation time on the day of the event.",
        problem_card3_title: "Reconciliation and Individual Contact",
        problem_card3_text: "Reconciliation of bank transfers, reminders to non-payers. Interactions related to money are mentally burdensome and weigh down the community atmosphere.",
        solution_tag: "Our Solution",
        solution_title: "Reduce the number of people involved in common operations<br>and devote human resources to<br>community activities.",
        solution_text: "With Nomad Resort Ops, the Discord bot functions as an excellent secretary. From confirming participants to issuing payment links, reminding participants before the application deadline, and confirming those who have not yet paid.<br><br>All people have to do is 'plan' and 'get excited.' Leave the rest to the tools.",
        solution_point1: "A seamless experience that is completed within Discord",
        solution_point2: "Zero payment confirmation with Stripe integration",
        solution_gif_title: "Discord Integration GIF Video Area",
        solution_gif_subtitle: "*Shows how the bot responds automatically, etc.",
        features_tag: "Features",
        features_title: "Three mechanisms to reduce<br>the operational workload by '90%'",
        feature1_title: "Consolidation of participation and schedules",
        feature1_text: "Synchronized with Discord stamps. A participant list is automatically generated just by stamping the recruitment message with the specified stamp, and capacity management is also automated.",
        feature2_title: "Fully automated payment with Stripe integration",
        feature2_text: "A payment link is sent at the same time as the participation is announced. It is possible to manage users who have paid and those who have not paid all at once.",
        feature3_title: "Real-time management dashboard",
        feature3_text: "Visualize participant information, payment status, etc. You always have the data you need for your next event planning.",
        features_screenshot_title: "Web App Management Screen Screenshot",
        features_screenshot_subtitle: "Place the dashboard and participant list screen",
        authority_title: "Implementing the know-how of<br>'NomadResort,' which knows the field inside and out",
        authority_text: "We are not just tool developers. We have actually accepted digital nomads from Japan and overseas and have managed many events.<br>We have carefully selected and refined only the functions that are truly necessary in the field.",
        authority_quote: "Before introducing the tool, I was busy with administrative work and didn't have time to talk to the participants. Now everything is automated, and I can concentrate 100% on 'interaction,' which is what I originally wanted to do.",
        authority_quote_author: "- Okinawa Digital Nomad Management Staff",
        price_badge: "RECOMMENDED",
        price_title: "Standard Plan",
        price_per_event: "Per event",
        price_unit: "100,000 yen~",
        price_tax: "(excluding tax)",
        price_includes: "Includes implementation support, Discord server settings, and Stripe integration settings.<br>*May vary depending on the scale and customization details.",
        price_cta: "Ask for details on fees and plans",
        flow_title: "3 steps to implementation",
        flow_step1_title: "Hearing & Setting",
        flow_step1_text: "We will ask you about your current issues and propose the optimal operational flow. (30 minutes)",
        flow_step2_title: "Discord Preparation",
        flow_step2_text: "We will install the bot and set the permissions. It can also be added to an existing server. (1-2 hours)",
        flow_step3_title: "Event Held",
        flow_step3_text: "Automation starts. All that's left is to enjoy communicating with the participants.",
        footer_cta_title: "Leave the operational work to the tools<br>and deliver the best experience to the participants.",
        footer_cta_subtitle: "First, please tell us about your current operational flow.<br>We will tell you how much work can be reduced and the possibilities for customization.",
        footer_cta_button: "First, request a free consultation/demo <i class='fa-solid fa-arrow-right ml-2'></i>",
        footer_cta_note: "*We will not engage in any unreasonable solicitation.",
        footer_copyright: "&copy; 2025 NomadResort Inc. All rights reserved.",
        modal_title: "Contact & Inquiry",
        modal_name: "Name",
        modal_company: "Affiliation (Company Name)",
        modal_email: "Contact (Email Address)",
        modal_submit: "Submit",
    },
    zh: {
        problem: "问题",
        features: "功能",
        price: "价格",
        contact_button: "联系我们",
        hero_badge: "管理成本降低90%",
        hero_title: "自动化繁琐的任务，<br>为运营创造“时间”。",
        hero_subtitle: "数字游民活动的管理应该更具创造性。<br>通过链接Discord和Stripe，从收款到联系都实现自动化。<br>这是一个最大限度地提高社区热情的解决方案。",
        hero_cta1: "获取咨询",
        hero_cta2: "查看演示",
        problem_title: "当参与者人数超过一定水平时，<br>您是否被“工作”所淹没？",
        problem_subtitle: "随着活动规模的扩大，与应该成为主要焦点的“体验设计”相比，“运营任务”占用了更多的时间。",
        problem_card1_title: "电子表格地狱",
        problem_card1_text: "参与者名单、付款确认、过敏信息……一个容易出错的操作，需要在多个工作表之间来回切换并手动复制和粘贴。",
        problem_card2_title: "无休止的提醒",
        problem_card2_text: "“活动在明天举行。”“这是地点。”被通过私信和提及的个人联系所追赶的压力，这会占用活动当天的准备时间。",
        problem_card3_title: "对账和个人联系",
        problem_card3_text: "银行转账的对账、对未付款者的提醒。与金钱相关的互动在精神上是沉重的负担，并会压低社区的气氛。",
        solution_tag: "我们的解决方案",
        solution_title: "减少参与共同运营的人数，<br>将人力资源投入到<br>社区活动中。",
        solution_text: "有了Nomad Resort Ops，Discord机器人可以充当出色的秘书。从确认参与者到发放付款链接，在申请截止日期前提醒参与者，以及确认尚未付款的人。<br><br>人们所要做的就是“计划”和“兴奋”。剩下的交给工具吧。",
        solution_point1: "在Discord中完成的无缝体验",
        solution_point2: "通过Stripe集成实现零付款确认",
        solution_gif_title: "Discord集成GIF视频区",
        solution_gif_subtitle: "*显示机器人如何自动响应等。",
        features_tag: "功能",
        features_title: "将运营工作量减少“90%”的<br>三种机制",
        feature1_title: "统一参与和日程安排",
        feature1_text: "与Discord图章同步。只需在招募消息上盖上指定的图章，即可自动生成参与者列表，并自动进行容量管理。",
        feature2_title: "通过Stripe集成实现全自动付款",
        feature2_text: "在宣布参与的同时发送付款链接。可以一次性管理已付款和未付款的用户。",
        feature3_title: "实时管理仪表板",
        feature3_text: "可视化参与者信息、付款状态等。您随时可以获得下一次活动策划所需的数据。",
        features_screenshot_title: "Web应用程序管理屏幕截图",
        features_screenshot_subtitle: "放置仪表板和参与者列表屏幕",
        authority_title: "实施了如指掌的“NomadResort”的专业知识",
        authority_text: "我们不仅仅是工具开发人员。我们实际上已经接受了来自日本和海外的数字游民，并管理了许多活动。<br>我们精心挑选并完善了现场真正需要的功能。",
        authority_quote: "在引入该工具之前，我忙于行政工作，没有时间与参与者交谈。现在一切都实现了自动化，我可以100%地专注于我最初想做的“互动”。",
        authority_quote_author: "- 冲绳数字游民管理人员",
        price_badge: "推荐",
        price_title: "标准套餐",
        price_per_event: "每次活动",
        price_unit: "10万日元起",
        price_tax: "（不含税）",
        price_includes: "包括实施支持、Discord服务器设置和Stripe集成设置。<br>*可能会根据规模和定制细节而有所不同。",
        price_cta: "询问有关费用和计划的详细信息",
        flow_title: "实施的3个步骤",
        flow_step1_title: "听证和设置",
        flow_step1_text: "我们将询问您当前的问题，并提出最佳的运营流程。（30分钟）",
        flow_step2_title: "Discord准备",
        flow_step2_text: "我们将安装机器人并设置权限。也可以将其添加到现有服务器。（1-2小时）",
        flow_step3_title: "活动举行",
        flow_step3_text: "自动化开始。剩下的就是享受与参与者的交流。",
        footer_cta_title: "将运营工作交给工具，<br>为参与者提供最佳体验。",
        footer_cta_subtitle: "首先，请告诉我们您当前的运营流程。<br>我们将告诉您可以减少多少工作量以及定制的可能性。",
        footer_cta_button: "首先，请求免费咨询/演示 <i class='fa-solid fa-arrow-right ml-2'></i>",
        footer_cta_note: "*我们不会进行任何不合理的招揽。",
        footer_copyright: "© 2025 NomadResort Inc. 保留所有权利。",
        modal_title: "咨询与问询",
        modal_name: "姓名",
        modal_company: "所属（公司名称）",
        modal_email: "联系方式（电子邮件地址）",
        modal_submit: "提交",
    },
    ja: {
        problem: "課題",
        features: "機能",
        price: "料金",
        contact_button: "導入相談",
        hero_badge: "管理コスト90%削減",
        hero_title: "雑務を自動化し、<br>運営に「余裕」を創る。",
        hero_subtitle: "デジタルノマドイベントの運営は、もっと創造的であるべきです。<br>DiscordとStripeを完全連携させ、集金から連絡までを自動化。<br>コミュニティの熱量を最大化するソリューションです。",
        hero_cta1: "導入相談をする",
        hero_cta2: "デモ画面を見る",
        problem_title: "参加者が一定以上を超えたとき、<br>運営は「作業」に忙殺されていませんか？",
        problem_subtitle: "イベント規模が大きくなるにつれ、本来注力すべき「体験設計」よりも「オペレーション業務」に時間が奪われていきます。",
        problem_card1_title: "スプレッドシート地獄",
        problem_card1_text: "参加者リスト、入金確認、アレルギー情報...。複数のシートを行き来し、手動でコピペを繰り返すミス誘発オペレーション。",
        problem_card2_title: "終わらないリマインド",
        problem_card2_text: "「明日開催です」「場所はこちらです」。DMやメンションでの個別連絡に追われ、当日の準備時間が削られていくストレス。",
        problem_card3_title: "消込作業と個別連絡",
        problem_card3_text: "銀行振込の照合、未払い者への催促。お金に関するやり取りは精神的負荷が高く、コミュニティの空気を重くします。",
        solution_tag: "Our Solution",
        solution_title: "共通オペレーションを省人化し、<br>コミュニティ活動に<br>人の力を注ぐ。",
        solution_text: "Nomad Resort Opsは、Discordボットが優秀な秘書として機能します。参加者の確認から決済リンクの発行、参加者募集締切前のリマインド、決済未完了者の確認まで。<br><br>人がやるべきなのは「企画」と「熱狂」だけ。あとはツールにお任せください。",
        solution_point1: "Discord内で完結するシームレスな体験",
        solution_point2: "Stripe連携で入金確認をゼロに",
        solution_gif_title: "Discord連携 GIF動画エリア",
        solution_gif_subtitle: "※Botが自動応答する様子などを配置",
        features_tag: "Features",
        features_title: "運営の手間を「90%」削減する、<br>3つの仕組み",
        feature1_title: "参加表明・スケジュールの集約",
        feature1_text: "Discordのスタンプと同期。募集メッセージに指定したスタンプを押すだけで参加者リストが自動生成され、定員管理も自動化されます。",
        feature2_title: "Stripe連携による全自動決済",
        feature2_text: "参加表明と同時に決済リンクを送付。支払いが完了したユーザーと未支払いのユーザーを一括で管理可能です。",
        feature3_title: "リアルタイム管理ダッシュボード",
        feature3_text: "参加者情報、決済状況などを可視化。次のイベント企画に必要なデータが常に手元にあります。",
        features_screenshot_title: "Webアプリ 管理画面スクリーンショット",
        features_screenshot_subtitle: "ダッシュボードや参加者一覧画面を配置",
        authority_title: "現場を知り尽くした<br>「NomadResort」のノウハウを実装",
        authority_text: "私たちは単なるツール開発者ではありません。実際に国内外のデジタルノマドを受け入れ、数多くのイベントを運営してきました。<br>現場で本当に必要な機能だけを厳選し、磨き上げています。",
        authority_quote: "ツール導入前は事務作業に追われ、参加者と話す時間がありませんでした。今は全て自動化され、本来やりたかった「交流」に100%集中できています。",
        authority_quote_author: "- 沖縄デジタルノマд運営スタッフ",
        price_badge: "RECOMMENDED",
        price_title: "スタンダードプラン",
        price_per_event: "1イベントあたり",
        price_unit: "万円〜",
        price_tax: "（税抜）",
        price_includes: "導入サポート、Discordサーバー設定、Stripe連携設定を含みます。<br>※規模やカスタマイズ内容により変動する場合があります。",
        price_cta: "料金・プランの詳細を聞く",
        flow_title: "導入までの3ステップ",
        flow_step1_title: "ヒアリング&設定",
        flow_step1_text: "現状の課題をヒアリングし、最適な運用フローをご提案します。(30分)",
        flow_step2_title: "Discord準備",
        flow_step2_text: "Botの導入と権限設定を行います。既存サーバーへの追加も可能です。(1-2時間)",
        flow_step3_title: "イベント開催",
        flow_step3_text: "自動化スタート。あとは参加者とのコミュニケーションを楽しむだけです。",
        footer_cta_title: "オペレーション業務はツールに任せて、<br>最高の体験を参加者に届けましょう。",
        footer_cta_subtitle: "まずは現状の運用フローをお聞かせください。<br>どれくらい工数が削減できるか、カスタマイズの可能性などお答えします。",
        footer_cta_button: "まずは無料相談・デモ依頼をする <i class='fa-solid fa-arrow-right ml-2'></i>",
        footer_cta_note: "※無理な勧誘は一切いたしません",
        footer_copyright: "&copy; 2025 NomadResort Inc. All rights reserved.",
        modal_title: "導入相談・お問い合わせ",
        modal_name: "お名前",
        modal_company: "所属（会社名）",
        modal_email: "連絡先（メールアドレス）",
        modal_submit: "送信する",
    }
};

function changeLanguage(lang) {
    document.querySelectorAll('[data-lang]').forEach(element => {
        const key = element.getAttribute('data-lang');
        if (translations[lang] && translations[lang][key]) {
            element.innerHTML = translations[lang][key];
        }
    });
}

// Set initial language and add Modal Logic
document.addEventListener('DOMContentLoaded', () => {
    // Language switcher logic
    const userLang = navigator.language || navigator.userLanguage;
    const lang = userLang.startsWith('ja') ? 'ja' : userLang.startsWith('zh') ? 'zh' : 'en';
    changeLanguage(lang);

    // Modal Logic
    const modal = document.getElementById('contact-modal');
    if (modal) {
        const openModalButtons = document.querySelectorAll('.open-modal-button');
        const closeModalButton = document.getElementById('close-modal-button');
        const contactForm = document.getElementById('contact-form');

        const openModal = () => {
            modal.classList.remove('hidden');
        };

        const closeModal = () => {
            modal.classList.add('hidden');
        };

        openModalButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                event.preventDefault(); // Stop anchor link navigation
                openModal();
            });
        });

        // For debugging the footer button
        const footerCtaButton = document.getElementById('footer-cta-open-modal-button');
        if (footerCtaButton) {
            footerCtaButton.addEventListener('click', (event) => {
                event.preventDefault();
                openModal();
            });
        }

        if (closeModalButton) {
            closeModalButton.addEventListener('click', closeModal);
        }

        // Close modal when clicking on the background
        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal();
            }
        });

        if (contactForm) {
            contactForm.addEventListener('submit', async (event) => {
                event.preventDefault();
                
                const formData = new FormData(contactForm);
                formData.append('_subject', '【Nomad Resort Ops】導入相談フォームよりお問い合わせ');

                try {
                    const response = await fetch('https://formspree.io/f/mdkqlpyw', {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });

                    if (response.ok) {
                        alert('お問い合わせありがとうございます。内容を確認の上、担当者よりご連絡いたします。');
                        contactForm.reset();
                        closeModal();
                    } else {
                        const data = await response.json();
                        if (data.errors) {
                            const errorMessage = data.errors.map(error => error.message).join(', ');
                            alert(`フォームの送信に失敗しました: ${errorMessage}`);
                        } else {
                            alert('フォームの送信に失敗しました。時間をおいて再度お試しください。');
                        }
                    }
                } catch (error) {
                    console.error('フォーム送信中にエラーが発生しました:', error);
                    alert('ネットワークエラーが発生しました。フォームを送信できませんでした。');
                }
            });
        }
    }

    // Intersection observer for fade-in effect
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('opacity-100', 'translate-y-0');
                entry.target.classList.remove('opacity-0', 'translate-y-10');
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('section > div').forEach(el => {
        el.classList.add('transition-all', 'duration-1000', 'opacity-0', 'translate-y-10');
        observer.observe(el);
    });
});
